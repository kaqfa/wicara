<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Page - {{ page.title }}</title>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <h1>Edit Page: {{ page.get('menu_title', page.title) }}</h1>
            <div class="admin-actions">
                <a href="{{ url_for('admin_dashboard') }}" class="btn">Back to Dashboard</a>
                <a href="{{ url_for('admin_logout') }}" class="btn btn-danger">Logout</a>
            </div>
        </header>
        
        <main class="admin-main">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <div class="edit-form">
                <form method="POST" enctype="multipart/form-data">
                    {% for field in page.fields %}
                    <div class="form-group">
                        <label for="{{ field.name }}">{{ field.label }}:</label>
                        
                        {% if field.type == 'text' %}
                        <input type="text" id="{{ field.name }}" name="{{ field.name }}" 
                               value="{{ field.get('value', '') }}" required>
                        
                        {% elif field.type == 'textarea' %}
                        <textarea id="{{ field.name }}" name="{{ field.name }}" rows="6" required>{{ field.get('value', '') }}</textarea>
                        
                        {% elif field.type == 'image' %}
                        <div class="image-field">
                            {% if field.get('value') %}
                            <div class="current-image">
                                <p>Current image:</p>
                                <img src="{{ field.value }}" alt="{{ field.label }}" style="max-width: 200px;">
                            </div>
                            {% endif %}
                            <input type="file" id="{{ field.name }}" name="{{ field.name }}" accept="image/*">
                            <small>Leave empty to keep current image</small>
                        </div>
                        
                        {% endif %}
                    </div>
                    {% endfor %}
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </main>
    </div>
</body>
</html>